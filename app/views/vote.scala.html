@(poll: Poll, voteForm: Form[Vote])(implicit notification: Option[Notification], request: play.api.mvc.RequestHeader)

@moreHead = {
  <link rel="stylesheet" href="@routes.Assets.at("stylesheets/vote.min.css")" />
}

@main(Messages("vote.page.title", poll.name), moreHead) {

  <div>@Messages("poll.share") : <a href="@routes.Chooze.vote(poll.slug)">@routes.Chooze.vote(poll.slug).absoluteURL()</a></div>

  <h1>@poll.name</h1>

  <p>@poll.description</p>

  @helper.form(action = routes.Chooze.vote(poll.slug)) {

    @if(voteForm.hasErrors) {
      <div>Oops. Please fix all errors</div>
    }

    @form.field(voteForm("notes"), Messages("notes.hint")) { notes =>

      @helper.repeat(notes) { note =>
        <div class="alternative">
          <span class="name">@poll.alternative(note("alternative")("id").value.get.toLong).get.name</span>
          <input type="range" name="@note("value").name" value="@note("value").value" min="0" max="100" step="1" />
          <input type="hidden" name="@note("alternative")("id").name" value="@note("alternative")("id").value" />
        </div>
      }
    }
    
    @form.field(voteForm("user"), Messages("user.name.hint")) { user =>
      @form.inputText(user, Messages("user.name"))
      @form.errors(user)
    }

    <div class="submit">
      <input type="submit" value="@Messages("vote")"> @Messages("or") <a href="@routes.Chooze.result(poll.slug)">@Messages("see.current.result")</a>
    </div>

  }
}
