@(poll: Poll)(implicit lang: Lang, n: Option[notifications.Notification], r: RequestHeader)

@moreHead = {
  <link rel="stylesheet" href="@routes.Assets.at("stylesheets/result.min.css")" />
}

@main(Messages("result.page.title", poll.name), moreHead) {

  <div>@Messages("poll.share") : <a href="@routes.Chooze.vote(poll.slug)">@routes.Chooze.vote(poll.slug).absoluteURL()</a></div>

  <h1>@poll.name</h1>

  <div class="tab-widget">

    <div class="tabs">
      <label><input type="radio" name="result-view" />@Messages("result.summary")</label>
      <label><input type="radio" name="result-view" />@Messages("result.details")</label>
    </div>

    <div class="containers">

      <div>
        @for((alternative, score) <- poll.results) {
          @* TODO Compute a progress bar as the background of the outer div *@
          <div stle="">
            <div style="font-size: @(8 + score * (64 - 8) / 100)px;">@alternative.name</div>
          </div>
        }
      </div>

      <div class="detailed-results">
        @if(!poll.votes) {
          <p>@Messages("poll.votes.empty")</p>
        } else {
          <table>
            <tr><th>@Messages("person")</th>@for(a <- poll.alternatives) { <th>@a.name</th> }</tr>
            @for(vote <- poll.votes) {
              <tr>
                <td>@vote.user</td>
                @for(note <- vote.notes) {
                  <td style="font-weight: @((1 + note.value * (9 - 1) / 100) * 100)">@(note.value)%</td>
                }
              </tr>
            }
          </table>
        }
      </div>

    </div>

  </div>


  <script type="text/javascript" src="@routes.Assets.at("javascripts/tabwidget.min.js")"></script>
}